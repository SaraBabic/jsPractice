<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEPTIRI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="buttons">
            <div id="showCardsButton" class="button">
                <img src="./slike/grid.png" alt="button for cards">
            </div>
            <div id="showListButton" class="button">
                <img src="./slike/list.png" alt="button for list">
            </div>
        </div>
        <div id="colorFilters"></div>
        
        <div id="content"></div>
    </div>
    

    <script>

        //dodati nov atribut:boja krila, i filtrirati po bojama
        //napraviti 4 kockice koje ce biti razlicito obojene
        //to ce biti filteri za leptire
        

        let leptiri = [
            {
                latinskoIme: "Parnassius apollo",
                srpskoIme: "Apolon",
                bojaKrila: "bela",
                putanjaDoSlike: "./slike/apollo.JPG"
            },
            {
                latinskoIme: "Aporia crataegi",
                srpskoIme: "Glogovac",
                bojaKrila: "bela",
                putanjaDoSlike: "./slike/Aporia-crataegi.jpg"
            },
            {
                latinskoIme: "Plebeius argyrognomon",
                srpskoIme: "Blistavi plavac",
                bojaKrila: "plava",
                putanjaDoSlike: "./slike/Plebeius_argyrognomon.jpg"
            },
            {
                latinskoIme: "Euphydryas maturna",
                srpskoIme: "Žuti šarenac",
                bojaKrila: "žuta",
                putanjaDoSlike: "./slike/Euphydryas_maturna.jpg"
            },
            {
                latinskoIme: "Arethusana arethusa",
                srpskoIme: "Jesenji livadar",
                bojaKrila: "braon",
                putanjaDoSlike: "./slike/arethusana-arethusa.jpg"
            },
            {
                latinskoIme: "Pararge aegeria",
                srpskoIme: "Šumski pegavac",
                bojaKrila: "žuta",
                putanjaDoSlike: "./slike/pararge-aegeria.jpg"
            }
        ];

        const colorMapper = {
            žuta: "#ffff00",
            bela: "#ffffff",
            plava: "#0000ff",
            braon: "#964B00"
        };

        const contentDiv = document.getElementById('content');
        const colorFilterDiv = document.getElementById('colorFilters');

        function listExistingColors(leptiri) {
            let colors = [];
                leptiri.forEach(function(leptir) {

                if(!colors.includes(leptir.bojaKrila)) {
                    colors.push(leptir.bojaKrila);
                } 
                });
            
            
            colors.forEach(function(color) {
                colorFilterDiv.insertAdjacentHTML('beforeEnd',
                `<div 
                    id="${color}" 
                    style="background-color: ${colorMapper[color]}" 
                    onclick="selectColor(this)"
                >${color}</div>`
            );
            });
            
        }
        listExistingColors(leptiri);

        function selectColor(target) {
            console.log(target.id);
        };

        function showGrid(leptiri, selectedColor = []) {
            if(selectColor !== 0) {

            }
            leptiri.forEach((leptir, index) => {
                contentDiv.insertAdjacentHTML('beforeEnd', 
            `<div id="card-${index}">
                <img src=${leptir.putanjaDoSlike} alt=${leptir.srpskoIme}>
                <h1>${leptir.srpskoIme}</h1>
                <p>${leptir.latinskoIme}</p>
                <p>Boja krila: ${leptir.bojaKrila}</p>
            </div>`
            );
            });
        }

        function showList(leptiri) {
            const table = document.createElement('table');
            table.id = 'list';
            contentDiv.appendChild(table);
            leptiri.forEach((leptir, index) => {
                table.insertAdjacentHTML('beforeEnd', 
            `<tr id="list-item-${index}">
                <td><img src=${leptir.putanjaDoSlike} alt=${leptir.srpskoIme}></td>
                <td><h1>${leptir.srpskoIme}</h1></td>
                <td><p>${leptir.latinskoIme}</p></td>
                <td><p>Boja krila: ${leptir.bojaKrila}</p></td>
            </tr>`
            );
            });
        }

        showGrid(leptiri);

        document.querySelector('#showCardsButton').addEventListener('click', function() {
                contentDiv.innerHTML = "";
                showGrid(leptiri);
        });

        document.querySelector('#showListButton').addEventListener('click', function() {
            
            contentDiv.innerHTML = "";
            showList(leptiri);
        });
    </script>
</body>
</html>